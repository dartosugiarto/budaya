<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="color-scheme" content="dark light" />
<title>Streaming — Gaya Netflix</title>
<style>
:root {--bg:#0b0d10;--fg:#e8eaed;--muted:#a1a7b3;--accent:#e50914;--card:#16191f;--ring:#2a2f39;--shadow:0 10px 30px rgba(0,0,0,.45)}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:radial-gradient(1200px 600px at 10% -10%,#141821 10%,transparent 60%),radial-gradient(1000px 500px at 110% -20%,#1b2030 10%,transparent 60%),var(--bg);color:var(--fg);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
a{color:inherit;text-decoration:none}
.container{max-width:1380px;margin:0 auto;padding:20px 24px}
.nav{display:flex;align-items:center;gap:18px}
.brand{font-weight:800;letter-spacing:.5px}
.navSpacer{flex:1}
.search{position:relative;min-width:260px}
.search input{width:100%;padding:10px 12px 10px 36px;border-radius:10px;border:1px solid var(--ring);background:#0f1217;color:var(--fg);outline:none}
.search svg{position:absolute;left:10px;top:50%;transform:translateY(-50%)}
.hero{position:relative;border-radius:18px;overflow:hidden;margin:18px 0;min-height:42vw;max-height:64vh;display:flex;align-items:flex-end;box-shadow:var(--shadow)}
.heroBackdrop{position:absolute;inset:0;background-size:cover;background-position:center;filter:brightness(.6) saturate(1.1)}
.heroShade{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.1) 0%,rgba(0,0,0,.3) 40%,rgba(0,0,0,.75) 100%)}
.heroContent{position:relative;padding:28px;display:grid;gap:12px;max-width:70%}
.heroTitle{font-size:clamp(22px,4vw,44px);font-weight:800;line-height:1.1}
.heroMeta{color:var(--muted);font-size:14px;display:flex;gap:10px;flex-wrap:wrap}
.actions{display:flex;gap:12px;margin-top:6px}
.btn{display:inline-flex;align-items:center;gap:8px;padding:11px 16px;border-radius:10px;border:1px solid transparent;background:#fff;color:#000;font-weight:700;cursor:pointer}
.btn.secondary{background:transparent;border-color:var(--ring);color:var(--fg)}
.section{margin:24px 0 8px;display:flex;align-items:center;justify-content:space-between}
.section h2{margin:0;font-size:18px}
.grid{display:grid;grid-template-columns:repeat(6,1fr);gap:14px}
.card{background:var(--card);border-radius:14px;overflow:hidden;position:relative;cursor:pointer;outline:0;transition:transform .25s ease,box-shadow .25s ease}
.card:hover{transform:translateY(-4px);box-shadow:var(--shadow)}
.thumb{aspect-ratio:2/3;background:#0d0f14 url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22400%22 height=%22600%22><rect width=%22400%22 height=%22600%22 fill=%22%230d0f14%22/></svg>') center/cover no-repeat}
.cardTitle{position:absolute;left:10px;bottom:10px;right:10px;background:linear-gradient(180deg,transparent,rgba(0,0,0,.75));padding:24px 10px 6px;border-radius:12px;color:#fff;font-weight:700;font-size:13px}
.badge{position:absolute;top:8px;left:8px;background:rgba(0,0,0,.65);border:1px solid rgba(255,255,255,.08);padding:4px 8px;border-radius:999px;font-size:11px;color:#fff}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);backdrop-filter:saturate(1.1) blur(6px);z-index:50;padding:20px}
.modal.open{display:flex}
.player{position:relative;width:min(100%,1000px);aspect-ratio:16/9;background:#000;border-radius:14px;overflow:hidden;box-shadow:var(--shadow)}
.playerHeader{position:absolute;top:8px;left:8px;right:8px;display:flex;align-items:center;justify-content:space-between;z-index:2}
.playerTitle{background:rgba(0,0,0,.6);color:#fff;padding:6px 10px;border-radius:10px;font-weight:700;font-size:13px}
.closeBtn{background:rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.12);color:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}
.playerInner,.playerInner iframe,.playerInner video{position:absolute;inset:0;width:100%;height:100%}
.kbd{font-variant-numeric:tabular-nums;color:var(--muted);font-size:12px}
footer{opacity:.7;margin:28px 0;font-size:12px}
@media (max-width:1100px){.grid{grid-template-columns:repeat(5,1fr)}.heroContent{max-width:86%}}
@media (max-width:880px){.grid{grid-template-columns:repeat(4,1fr)}.hero{min-height:54vw}}
@media (max-width:640px){.grid{grid-template-columns:repeat(2,1fr)}.heroContent{max-width:100%}}
</style>
</head>
<body>
<div class="container">
  <div class="nav">
    <div class="brand">Play</div>
    <div class="navSpacer"></div>
    <div class="search">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 21l-3.5-3.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2"/></svg>
      <input id="q" placeholder="Cari judul..." autocomplete="off" />
    </div>
  </div>

  <div class="hero" id="hero">
    <div class="heroBackdrop" id="heroBackdrop"></div>
    <div class="heroShade"></div>
    <div class="heroContent">
      <div class="heroTitle" id="heroTitle"></div>
      <div class="heroMeta" id="heroMeta"></div>
      <div class="actions">
        <button class="btn" id="heroPlay">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
          Putar
        </button>
        <button class="btn secondary" id="heroInfo">Detail</button>
      </div>
      <div class="kbd">Spasi: play/pause • ←/→: ±10 dtk • Esc: tutup</div>
    </div>
  </div>

  <div class="section"><h2>Lanjut Ditonton</h2></div>
  <div class="grid" id="continueGrid"></div>

  <div class="section"><h2>Semua</h2></div>
  <div class="grid" id="allGrid"></div>

  <footer>Gunakan berbagi publik di Google Drive. Untuk pemutaran paling stabil dan cepat, pertimbangkan CDN/HLS.</footer>
</div>

<div class="modal" id="modal">
  <div class="player" role="dialog" aria-modal="true">
    <div class="playerHeader">
      <div class="playerTitle" id="playerTitle"></div>
      <button class="closeBtn" id="closeModal">Tutup</button>
    </div>
    <div class="playerInner" id="playerInner"></div>
  </div>
</div>

<script>
const library=[{
  id:'sample-1',
  type:'drivePreview',
  driveId:'REPLACE_WITH_DRIVE_FILE_ID',
  title:'Contoh Video (Preview)',
  year:'2025',
  duration:'01:23:45',
  poster:'https://images.unsplash.com/photo-1524985069026-dd778a71c7b4?q=80&w=600&auto=format&fit=crop',
  backdrop:'https://images.unsplash.com/photo-1524985069026-dd778a71c7b4?q=80&w=1400&auto=format&fit=crop'
},{
  id:'sample-2',
  type:'direct',
  driveId:'REPLACE_WITH_DRIVE_FILE_ID',
  title:'Contoh Video (Direct)',
  year:'2025',
  duration:'00:42:10',
  poster:'https://images.unsplash.com/photo-1526948128573-703ee1aeb6fa?q=80&w=600&auto=format&fit=crop',
  backdrop:'https://images.unsplash.com/photo-1526948128573-703ee1aeb6fa?q=80&w=1400&auto=format&fit=crop'
}];

const elHeroBackdrop=document.getElementById('heroBackdrop');
const elHeroTitle=document.getElementById('heroTitle');
const elHeroMeta=document.getElementById('heroMeta');
const elHeroPlay=document.getElementById('heroPlay');
const elHeroInfo=document.getElementById('heroInfo');
const elContinue=document.getElementById('continueGrid');
const elAll=document.getElementById('allGrid');
const elModal=document.getElementById('modal');
const elPlayerInner=document.getElementById('playerInner');
const elPlayerTitle=document.getElementById('playerTitle');
const elQ=document.getElementById('q');
const STORAGE_KEY_PREFIX='progress:';

let filtered=[...library];
let featured=filtered[0]||null;
let current=null;
let html5Player=null;

function drivePreviewUrl(id){return `https://drive.google.com/file/d/${id}/preview`}
function driveDirectUrl(id){return `https://drive.google.com/uc?id=${id}&export=download`}

function fmtMeta(item){
  const p=progress(item);
  const parts=[item.year||'',item.duration||''].filter(Boolean);
  if(p>0) parts.push(`Lanjut ${Math.floor(p*100)}%`);
  return parts.join(' • ')
}

function mountHero(item){
  if(!item) return;
  elHeroBackdrop.style.backgroundImage=`url(${item.backdrop||item.poster})`;
  elHeroTitle.textContent=item.title;
  elHeroMeta.textContent=fmtMeta(item);
  elHeroPlay.onclick=()=>openPlayer(item);
  elHeroInfo.onclick=()=>alert(item.title);
}

function card(item){
  const div=document.createElement('div');
  div.className='card';
  div.setAttribute('tabindex','0');
  const badge=document.createElement('div');
  badge.className='badge';
  badge.textContent=item.year||'';
  const thumb=document.createElement('div');
  thumb.className='thumb';
  thumb.style.backgroundImage=`url(${item.poster})`;
  thumb.loading='lazy';
  const title=document.createElement('div');
  title.className='cardTitle';
  title.textContent=item.title;
  div.appendChild(thumb);
  div.appendChild(badge);
  div.appendChild(title);
  div.onclick=()=>openPlayer(item);
  div.onkeyup=e=>{if(e.key==='Enter') openPlayer(item)};
  return div;
}

function render(){
  elAll.innerHTML='';
  filtered.forEach(v=>elAll.appendChild(card(v)));
  const cont=library.filter(v=>progress(v)>0).sort((a,b)=>progress(b)-progress(a));
  elContinue.innerHTML='';
  cont.forEach(v=>elContinue.appendChild(card(v)));
  featured=filtered[0]||null;
  mountHero(featured);
}

function openPlayer(item){
  current=item;
  elModal.classList.add('open');
  elPlayerTitle.textContent=item.title;
  elPlayerInner.innerHTML='';
  html5Player=null;
  if(item.type==='direct'){
    const v=document.createElement('video');
    v.src=driveDirectUrl(item.driveId);
    v.controls=true;
    v.playsInline=true;
    v.autoplay=true;
    v.preload='metadata';
    const p=loadProgress(item);
    if(p>0){v.addEventListener('loadedmetadata',()=>{v.currentTime=v.duration*p||0})}
    v.addEventListener('timeupdate',()=>saveProgress(item,v));
    html5Player=v;
    elPlayerInner.appendChild(v);
  }else{
    const f=document.createElement('iframe');
    f.src=drivePreviewUrl(item.driveId);
    f.setAttribute('allow','accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share');
    f.allowFullscreen=true;
    elPlayerInner.appendChild(f);
  }
}

function closePlayer(){
  if(html5Player){html5Player.pause()}
  elPlayerInner.innerHTML='';
  elModal.classList.remove('open');
}

function progress(item){
  const p=loadProgress(item);
  return Math.min(Math.max(p,0),0.98);
}

function loadProgress(item){
  try{
    const raw=localStorage.getItem(STORAGE_KEY_PREFIX+item.id);
    if(!raw) return 0;
    const {t,d}=JSON.parse(raw);
    if(!d||d<=0) return 0;
    return Math.max(0,Math.min(t/d,0.98));
  }catch(e){return 0}
}

function saveProgress(item,video){
  try{
    const data={t:video.currentTime||0,d:video.duration||0};
    localStorage.setItem(STORAGE_KEY_PREFIX+item.id,JSON.stringify(data));
  }catch(e){}
}

document.getElementById('closeModal').onclick=closePlayer;
elModal.addEventListener('click',e=>{if(e.target===elModal) closePlayer()});
document.addEventListener('keydown',e=>{
  if(!elModal.classList.contains('open')) return;
  if(e.key==='Escape') return closePlayer();
  if(!html5Player) return;
  if(e.code==='Space'){e.preventDefault();html5Player.paused?html5Player.play():html5Player.pause()}
  if(e.key==='ArrowRight'){html5Player.currentTime+=10}
  if(e.key==='ArrowLeft'){html5Player.currentTime-=10}
  if(e.key==='ArrowUp'){html5Player.volume=Math.min(1,html5Player.volume+.05)}
  if(e.key==='ArrowDown'){html5Player.volume=Math.max(0,html5Player.volume-.05)}
});

elQ.addEventListener('input',e=>{
  const q=(e.target.value||'').toLowerCase().trim();
  filtered=library.filter(v=>v.title.toLowerCase().includes(q));
  render();
});

mountHero(featured);
render();
</script>
</body>
</html>
